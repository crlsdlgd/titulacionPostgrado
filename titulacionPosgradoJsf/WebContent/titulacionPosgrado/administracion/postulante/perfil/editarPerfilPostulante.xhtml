<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 
      
      
<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">
<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
				value="Perfil / Mi perfil / Datos de usuario / Edición" />
		</ui:include>
</ui:define>      
<ui:define name="cuerpo">
	<h:form id="frmEditar" enctype="multipart/form-data" acceptcharset="UTF-8" >
		<p:panel id="pnlInfPersonal" header="Ingrese su información personal" >
			<!-- ******************** TABLA RESPONSIVA ************************ -->
			<div class="grid condensed">
			<div class="row cells12">
		       		<!-- identificacion -->
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFotografia" for="txtFotografia" value="Fotografía del perfil: " />
		       				</ui:define>
		       				<ui:define name="valor">
		       					<p:graphicImage id="txtFotografia" value="#{perfilPostulanteForm.image}" height="150" width="100"/>
		       				</ui:define>
		       				<ui:define name="etiquetaError">
		       					<p:graphicImage id="errorFoto" value="#{perfilPostulanteForm.image}" height="150" width="100"/>
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		        	
		        </div>
		        <div class="row cells12">
		        <div class="cell colspan4"><!-- SEGUNDO APELLIDO-->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblSeleccion" for="foto" value="La imagen que seleccione se imprimirá en su título de posgrado "/>	
		       				</ui:define>
		       				<ui:define name="valor">
									<p:outputLabel id="foto" style="font-weight: Normal !important;"/>
									<p:fileUpload id="flupArchivoSubir" 
										fileUploadListener="#{perfilPostulanteForm.cargarImagen}" update="txtFotografia"
										auto="true" sizeLimit="1572864" allowTypes="/(\.|\/)(png|jpg)$/"
										invalidSizeMessage="Tamaño de archivo excedido! máximo 1.5 Mb"
										label="Buscar archivo" 
										invalidFileMessage="Tipo de archivo no válido! solo formato PNG o JPG"
										uploadLabel="Cargar" style="width:100%" required="true"
										requiredMessage="Campo requerido" dragDropSupport="false" 
										/>
								</ui:define>
		       			</ui:decorate>
					</div>
		        </div>
				<!-- ******************** FILA NUMERO 1 ************************ -->
		       	<div class="row cells12">
		       		<!-- identificacion -->
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblIdentificacion" for="txtIdentificacion" value="Identificación " />
		       				</ui:define>
		       				<ui:define name="valor">
		       					<p:outputLabel id="txtIdentificacion" value="#{perfilPostulanteForm.ppfPersona.prsIdentificacion}"
		       									style="font-weight: Normal !important;" />	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		        </div>	
		        <!-- ******************** FILA NUMERO 2 ************************ -->
		       	<div class="row cells12">	
		        	<!-- Nombres -->
		        	<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblNombres" for="txtNombres" value="Nombres: "/>		
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtNombres" value="#{perfilPostulanteForm.ppfPersona.prsNombres}"
		       						         required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"
		       						         validator="sinCaracteresEspecialesValidator" maxlength="32" >
		       						<p:ajax event="blur" update="lblNombres , txtNombres , msgNombres"/>
		       					</p:inputText>	
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgNombres" for="txtNombres"/>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>		        
		     <!-- ******************** FILA NUMERO 3 ************************ -->
		       	<div class="row cells12">
		        	<!-- Apellido1 -->
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblApellido1" for="txtApellido1" value="Primer apellido: "/>		
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtApellido1" value="#{perfilPostulanteForm.ppfPersona.prsPrimerApellido}"
		       								 required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"
		       								 validator="sinCaracteresEspecialesValidator" maxlength="32" >
					        		<p:ajax event="blur" update="lblApellido1 , txtApellido1 , msgApellido1"/>
					        	</p:inputText>	
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgApellido1" for="txtApellido1"/>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		        </div>	
		     <!-- ******************** FILA NUMERO 4 ************************ -->
		       	<div class="row cells12">
		        	<!-- Apellido2 -->
			        <div class="cell colspan6" >
			        	<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblApellido2" for="txtApellido2" value="Segundo apellido: "/>		
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtApellido2" value="#{perfilPostulanteForm.ppfPersona.prsSegundoApellido}"
		       					validator="sinCaracteresEspecialesValidator" maxlength="32" />
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgApellido2" for="txtApellido2"/>	
		       				</ui:define>
		       			</ui:decorate>
			        </div>
		        </div>	
		    	<!-- ******************** FILA NUMERO 5 ************************ -->
		       	<div class="row cells12">
		        	<div class="cell colspan6" >
		       			<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblSexoEditar" for="slcSexo" value="Sexo: "/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<h:selectOneMenu id="slcSexo" value="#{perfilPostulanteForm.ppfPersona.prsSexo}" required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}">
										<f:selectItems value="#{listasCombosForm.listaSexo}" var="item" itemLabel="#{item.label}" itemValue="#{item.value}" />
										<p:ajax event="change" />
								</h:selectOneMenu>		
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgSexo" for="slcSexo"/>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		    	
		    	<!-- ******************** FILA NUMERO 6 ************************ -->
		       	<div class="row cells12">
		       		<!-- e-mail -->
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblMail" for="txtMail" value="Correo electrónico: "/>		
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtMail" value="#{perfilPostulanteForm.ppfPersona.prsMailPersonal}" style="width: 20em;"
		       								 required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" 
		       								 validatorMessage="No es una dirección de correo válida">
		       						<f:validator validatorId="mailValidator" />
		       						<p:ajax event="blur" update="lblMail , txtMail , msgMail"/>
		       					</p:inputText>
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgMail" for="txtMail"/>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		         </div>	
		        <!-- ******************** FILA NUMERO 7 ************************ -->
		       	<div class="row cells12">
			       	<div class="cell colspan6">
			       	<!-- fecha de nacimiento -->
							<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
								<ui:define name="etiqueta">
									<p:outputLabel id="lblFechaNacimiento" for="txtFechaNacimiento" value="Fecha de nacimiento (dd-mm-aaaa): " />
								</ui:define>
									<ui:define name="valor">
										<p:calendar id="txtFechaNacimiento" value="#{perfilPostulanteForm.ppfPersona.prsFechaNacimiento}"
											maxdate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
											required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" 
											validator="fechaNacimientoValidator" converterMessage="La fecha ingresada no es válida. (dd-mm-aaaa) Ejemplo: 26-05-2016" >
											<p:ajax event="blur" update=" lblFechaNacimiento , msgFechaNacimiento ,  txtFechaNacimiento" />
										</p:calendar>
									</ui:define>
								<ui:define name="etiquetaError">
									<p:message id="msgFechaNacimiento" for="txtFechaNacimiento" />
								</ui:define>
							</ui:decorate>
					</div>
				</div>
		     <!-- ******************** FILA NUMERO 8 ************************ -->
		       	<div class="row cells12">
		        	<!-- Telefono -->
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFono1" for="txtFono1" value="Teléfono: "/>		
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:inputText id="txtFono1" value="#{perfilPostulanteForm.ppfPersona.prsTelefono}" style="width: 20em;"
		       						  required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"
		       						 maxlength="10" validatorMessage="Ingrese sólo números, min 7 max 10.">
		       						<f:validateRegex pattern="^[0-9]{7,10}$" for="txtFono1" />
    								<p:ajax event="blur" update="lblFono1 , txtFono1 , msgFono1"/>
    							</p:inputText>
		       				</ui:define>
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgFono1" for="txtFono1"/>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		    	</div>
		    	
		    	<!-- ******************** FILA NUMERO 9 ************************ -->
		       	<div class="row cells12">
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblNacionalidad" for="txtNacionalidad" value="País Nacionalidad: "/>		
		       				</ui:define>
		       				
		       				<ui:define name="valor">
								<h:selectOneMenu id="txtNacionalidad" value="#{perfilPostulanteForm.ppfPersona.prsUbicacionNacionalidad.ubcId}"
									required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" style="width: 100%;">
									<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}"/>
									<f:selectItems var="item"  value="#{perfilPostulanteForm.ppfListUbicacionPaises}"
										itemLabel="#{item.ubcDescripcion}" itemValue="#{item.ubcId}" />
									<p:ajax event="change" update="lblNacionalidad , txtNacionalidad , msgNacionalidad " />
								</h:selectOneMenu>
							</ui:define>
		       				
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgNacionalidad" for="txtNacionalidad"/>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		         </div>	
		         <!-- ******************** FILA NUMERO 10 ************************ -->
		       	<div class="row cells12">
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblEtnia" for="txtEtnia" value="Etnia: "/>		
		       				</ui:define>
		       				
		       				<ui:define name="valor">
								<h:selectOneMenu id="txtEtnia" value="#{perfilPostulanteForm.ppfPersona.prsEtnia.etnId}"
									required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" style="width: 100%;">
									<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}"/>
									<f:selectItems var="item"  value="#{perfilPostulanteForm.ppfListEtnias}"
										itemLabel="#{item.etnDescripcion}" itemValue="#{item.etnId}" />
									<p:ajax event="change" update="lblEtnia , txtEtnia , msgEtnia " />
								</h:selectOneMenu>
							</ui:define>
		       				
		       				<ui:define name="etiquetaError">	
		       					<p:message id="msgEtnia" for="txtEtnia"/>	
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		         </div>	
		   	</div> 		
		</p:panel>

		<div >
			<p:commandButton id="btnCancelar" value="Cancelar" action="#{perfilPostulanteForm.cancelarEdicion()}" immediate="true" ajax="false" />
			<p:commandButton id="btnGuardar" value="Guardar" action="#{perfilPostulanteForm.guardar()}" onclick="PF('dialogoTrabajando').show();"  ajax="false"/>
		</div>
	</h:form>	

	
</ui:define>
</ui:composition>
</html>