<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 
      
<ui:composition template="/componentesGenerales/plantillas/pltPrincipalSinMenuEjecModal.xhtml">
<ui:define name="paginacion">
		<ui:include src="/componentesGenerales/plantillas/pltPaginacion.xhtml">
			<ui:param name="pagina"
				value=" Validación / Validar postulados / Edición " />
		</ui:include>
</ui:define>

<ui:define name="cuerpo">
<script language="JavaScript">
//<![CDATA[
	function verificarErrores(){
    	var idVarError = 'compOculto:txtValidador';
    	var varError = document.getElementById(idVarError);
    	if(varError.value == 1){
    		document.getElementById('frVisualizar:btnAceptarModal').click();
        }
    } 
 //]]> 
</script>



	<h:form id="frVisualizar" enctype="multipart/form-data" acceptcharset="UTF-8" >
		<!-- ******************** PANEL DE INFORMACION DEL POSTULADO ************************ -->
		<p:panel id="pnlDatosPersona" header="Información del postulado">
			<!-- ******************** TABLA RESPONSIVA ************************ -->
			<div class="grid condensed">
				<!-- ******************** FILA NUMERO 1 ************************ -->
				<div class="row cells12">
		       		<!-- identificacion -->
		       		<div class="cell colspan6" >
		       			<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblFotografia" for="txtFotografia" value="Fotografía del perfil: " />
		       				</ui:define>
		       				<ui:define name="valor">
		       					<p:graphicImage id="txtFotografia" value="#{validacionPosgradistaForm.image}" height="150" width="100"/>
		       				</ui:define>
		       			</ui:decorate>
		        	</div>
		        </div>
				
				<div class="row cells8">
					<div class="cell colspan4"><!-- IDENTIFICACION -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblIdentificacion" for="txtIdentificacion" value="Identificación: "/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:outputLabel id="txtIdentificacion" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.prsIdentificacion}" 
		       									style="font-weight: Normal !important;">
		       					</p:outputLabel>	
		       				</ui:define>
		       			</ui:decorate>
					</div>
				</div> <!-- Fin fila 1 -->
				<!-- ******************** FILA NUMERO 2 ************************ -->
				<div class="row cells8">
					<div class="cell colspan4"><!-- NOMBRES -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblNombres" for="txtNombres" value="Nombre: "/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:outputLabel id="txtNombres" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.prsPrimerApellido} #{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.prsSegundoApellido ==null?'':validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.prsSegundoApellido} #{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.prsNombres}"
		       									style="font-weight: Normal !important;">
		       					</p:outputLabel>	
		       				</ui:define>
		       			</ui:decorate>
					</div> 
				</div> <!-- Fin fila 2 -->
				<!-- ******************** FILA NUMERO 3 ************************ -->
			    <div class="row cells8">
					<div class="cell colspan4"><!-- NOMBRES -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblMail" for="txtMail" value="Correo electrónico: "/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:outputLabel id="txtMail" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.prsMailPersonal}"
		       									style="font-weight: Normal !important;">
		       					</p:outputLabel>	
		       				</ui:define>
		       			</ui:decorate>
					</div>  <!-- Fin fila 3 -->
				</div> 
				   	<div class="row cells8">
		       		<div class="cell colspan4"><!-- carrea -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblPrograma" for="txtPrograma" value="Programa: "/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:outputLabel id="txtPrograma" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.crrDescripcion}"
		       									style="font-weight: Normal !important;">
		       					</p:outputLabel>	
		       				</ui:define>
		       			</ui:decorate>
					</div>
		    	</div>
			</div>
				<!-- ******************** FILA NUMERO 2 ************************ -->
		</p:panel>	
		<!-- ******************** PANEL DE INFORMACION DEL POSTULADO ************************ -->
		<p:panel id="pnlDatosValidar" header="Información a validar">
			<!-- ******************** TABLA RESPONSIVA ************************ -->
			<div class="grid condensed">
				<!-- ******************** FILA NUMERO 2 ************************ -->
		    	<div class="row cells8">
		       		<div class="cell colspan4"><!-- senescyt -->
						<ui:decorate  template="/componentesGenerales/plantillas/pltComponenteGeneralDisplay.xhtml">
		       				<ui:define name="etiqueta">	
		       					<p:outputLabel id="lblSenescyt" for="txtSenescyt" value="Código del Senescyt: "/>	
		       				</ui:define>
		       				<ui:define name="valor">	
		       					<p:outputLabel id="txtSenescyt" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.prtrTtlRegSenescyt}"
		       									style="font-weight: Normal !important;">
		       					</p:outputLabel>	
		       				</ui:define>
		       			</ui:decorate>
					</div>
		    	</div>
			</div>
		</p:panel>	
			<p:panel id="pnlResultados" header="Resultados de la búsqueda" >
			<p:dataTable id="dtsUsuario" var="item" value="#{validacionPosgradistaForm.vsfListaTitulos}"
		    		 		rows="10" paginator="true"
		                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		                         rowsPerPageTemplate="5,10,15" emptyMessage="NO SE ENCONTRARON DATOS CON LOS PARÁMETROS DE BÚSQUEDA INGRESADOS">
				        <p:column headerText="Fecha de Registro" style="width: 4em ! important; text-align:center">
				            <h:outputText value="#{item.fechaRegistroSenescyt}"/>
				        </p:column>
				         <p:column headerText="Universidad" style="width: 4em ! important; text-align:center">
				            <h:outputText value="#{item.universidadSenescyt}"/>
				        </p:column>
				        <p:column headerText="Descripción de título" style="width: 4em ! important; text-align:center">
				            <h:outputText value="#{item.detalleSenescyt}"/>
				        </p:column>
				        <p:column headerText="Número de registro" style="width: 5em ! important; text-align:center">
				            <h:outputText value="#{item.registroSenescyt}"/>
				        </p:column>
				        <p:column headerText="Opción" style="width: 5em ! important; text-align:center">
				            <p:commandLink value="Registrar" action="#{validacionPosgradistaForm.registrarSenescyt(item.registroSenescyt)}" 
				            onclick="PF('dialogoTrabajando').show();" ajax="false" style="color:blue;" update="txtSenescyt" immediate="true"/>
				        </p:column>
			</p:dataTable>
		</p:panel>
		<p:panel id="pnlDatosAcademicos" header="Información académica">
		<div class="grid condensed">
		<div class="row cells4">
					<div class="cell colspan2"><!-- Fecha Inicio Estudios -->
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
							<ui:define name="etiqueta">
								<p:outputLabel id="lblFechaInicioEstudios" for="txtFechaInicioEstudios" value="Fecha de inicio de cohorte del programa del posgradista: dd/mm/aaaa" />
							</ui:define>
								<ui:define name="valor">
									<p:calendar id="txtFechaInicioEstudios" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.fcesFechaInicioCohorte}" placeholder="dd-mm-aaaa"
										maxdate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
										required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}"  converterMessage="Por favor ingrese una fecha válida"
										>
										<f:attribute name="estudiante" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar}" />
										<f:attribute name="tipoFecha" value="0" />
										<p:ajax event="blur" listener="#{validacionPosgradistaForm.validarFechaFinCohorte()}" update = "lblFechaInicioEstudios,txtFechaInicioEstudios,msgFechaInicioEstudios,msgFechaEgresamiento"/>
									</p:calendar>
								</ui:define>
							<ui:define name="etiquetaError">
								<p:message id="msgFechaInicioEstudios" for="txtFechaInicioEstudios" />
							</ui:define>
						</ui:decorate>
					</div>
						<div class="cell colspan2"><!-- Fecha egresamieto -->
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
							<ui:define name="etiqueta">
								<p:outputLabel id="lblFechaEgresamiento" for="txtFechaEgresamiento" value="Fecha de culminación de malla: dd/mm/aaaa" />
							</ui:define>
								<ui:define name="valor">
									<p:calendar id="txtFechaEgresamiento" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.fcesFechaFinCohorte}" placeholder="dd-mm-aaaa"
										maxdate="#{generalesConstantesForm.fechaDelSistema}" navigator="false" showOn="none" locale="es" pattern="dd-MM-yyyy" mask="true"
										required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" converterMessage="Por favor ingrese una fecha válida"
										validator="fechaCohorteValidator">
										<f:attribute name="estudiante" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar}" />
										<f:attribute name="tipoFecha" value="1" />
										<p:ajax event="blur" update=" lblFechaEgresamiento , txtFechaEgresamiento ,  msgFechaEgresamiento , msgFechaInicioEstudios " />
									</p:calendar>
								</ui:define>
							<ui:define name="etiquetaError">
								<p:message id="msgFechaEgresamiento" for="txtFechaEgresamiento" />
							</ui:define>
						</ui:decorate>
					</div>
				</div><!-- Fin fila 1-->
				<div class="row cells4" >
			    	<div class="cell colspan2">
							<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
								<ui:define name="etiqueta">
									<p:outputLabel id="lblAproboIngles" for="slcAproboIngles" value="¿Es un requisito del programa el idioma extranjero?: " />
								</ui:define>
								<ui:define name="valor">
									<h:selectOneMenu id="slcAproboIngles" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.vldRslAprobacionIngles}"
										required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" >
										<f:selectItem itemLabel="#{generalesConstantesForm.appSeleccione}" />
										<f:selectItems var="item"  value="#{listasCombosForm.listaGeneralSiNo}"
											itemLabel="#{item.label}" itemValue="#{item.value}" />
									</h:selectOneMenu>
								</ui:define>
								<ui:define name="etiquetaError">
									<p:message id="msgAproboIngles" for="slcAproboIngles" />
								</ui:define>
							</ui:decorate>
					</div>
		    	</div>
		    	
		    	<div class="cell colspan2">
						<ui:decorate template="/componentesGenerales/plantillas/pltComponenteGeneralEdit.xhtml">
							<ui:define name="etiqueta">
								<p:outputLabel id="lblTitulo" for="txtTitulo" value="Ingrese la descripción del título de tercer nivel requerido" />
							</ui:define>
								<ui:define name="valor">
									<p:inputText id="txtTitulo" value="#{validacionPosgradistaForm.vsfEstudianteValidacionJdbcDtoEditar.fcesTituloBachiller}" 
										required="true" requiredMessage="#{generalesConstantesForm.msgCampoRequerido}" 
										validator="sinCaracteresEspecialesValidator"/>
								</ui:define>
							<ui:define name="etiquetaError">
								<p:message id="msgTitulo" for="txtTitulo" />
							</ui:define>
						</ui:decorate>
					</div>
		    	
		</div>
		</p:panel>
			
		<div >
		
		
		
		
			<p:commandButton id="btnCancelar" value="Regresar" action="#{validacionPosgradistaForm.irCancelarPostulacion()}" immediate="true" ajax="false"  />
			<p:commandButton id="btnGuardar" value="Guardar idoneidad" action="#{validacionPosgradistaForm.verificarClickAceptarTramite(0)}"  ajax="false"   />
			<p:commandButton id="btnAceptarModal" value="EjecutarModalAceptar" style="visibility:hidden;">
					<p:ajax oncomplete="PF('dialogoAceptarValidacionIdoneidad').show();"   update=":frmModalAceptarValidadionIdoneidad" />	    				
    		</p:commandButton>
			
		</div>
	</h:form>
	
	<ui:include src="/titulacionPosgrado/validador/idoneidad/modalAceptarValidacionIdoneidad.xhtml"/>
	<h:form id="compOculto" style="visibility:hidden;">
	 	<p:inputText id="txtValidador" value="#{validacionPosgradistaForm.vsfValidadorClic}" >
		</p:inputText>	
	</h:form>
</ui:define>
</ui:composition>
</html>